<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Babylon.js Animation Example</title>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <style>
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script src="SceneAndMeshLoader.js"></script>
    <script src="AnimationLoader.js"></script>
    <script src="playAnims.js"></script>
    <script>
        async function initialize() {
            [scene, engine, loaded] = await createScene(document.getElementById("renderCanvas"));

            // Run the render loop
            engine.runRenderLoop(function () {
                scene.render();
            });

            // Resize the canvas when the window is resized
            window.addEventListener("resize", function () {
                engine.resize();
            });
        }

        initialize().catch(error => {
            console.error('Failed to initialize:', error);
        });

        function loadAnims() {
            if (scene && loaded) {
                getAnims(scene, loaded);
            } else {
                console.error('Scene or loaded variables are not set.');
            }
        }

        function playLoadedAnims() {
            if (scene && loaded) {
                playAnims(scene, loaded);
            } else {
                console.error('Scene or loaded variables are not set.');
            }
        }

        function logMeshForward() {
            // Log the forward vector of the mesh every second
            setInterval(() => {
                if(loaded.meshes[1]) {
                    // Get the forward vector of the mesh
                    const forward = loaded.meshes[1].forward;

                    // Log the forward vector
                    console.log("Forward Vector:", forward);
                } else {
                    console.log("Mesh is not loaded.");
                }
            }, 1000); // Log every 1 second
        }

    </script>
    <!-- <button onclick="(async function() { await getAnims(scene, loaded)});">Load Anims</button> -->
    <button onclick="loadAnims()">Load Anims</button>
    <button onclick="playLoadedAnims()">Play Anims</button>
    <button onclick="logMeshForward()">Log Forward</button>
    <!-- <button onclick="getAnims(scene, mesh)">Load Anims</button> -->
</body>
</html>
